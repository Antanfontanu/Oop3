
cmake_minimum_required(VERSION 3.10)


project(Antanfontanu)


set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O2 -Wall")


#Pagrindinis
file(GLOB SOURCES
    "main.cpp"
    "failai.cpp"
    "meniu.cpp"
    "studentas.cpp"
)


add_executable(${PROJECT_NAME} ${SOURCES})


target_include_directories(${PROJECT_NAME} PRIVATE ${CMAKE_SOURCE_DIR})


add_custom_target(run
    COMMAND ${PROJECT_NAME}
    DEPENDS ${PROJECT_NAME}
    WORKING_DIRECTORY ${CMAKE_PROJECT_DIR}
    COMMENT "Paleid≈æiama programa"
)

# Testai su Catch2
add_executable(tests
    tests.cpp
    studentas.cpp
    failai.cpp
    meniu.cpp
)


target_include_directories(tests PRIVATE ${CMAKE_SOURCE_DIR}/main)


enable_testing()
add_test(NAME unit_tests COMMAND tests)